# alfred-notion-quick-add

> Easily capture data into a Notion database.

![Walkthrough](/walkthrough.gif)

## Install

Download from this [Release Page](https://github.com/pauloportella/alfred-notion-quick-add/releases)

or via NPM

```
$ npm install --global @pauloportella/alfred-notion-quick-add
```

Note: you will need Node.js installed in order for this script to work. If you want to check this, open a command line and type 
```
node -v
```

If you do not have it: [How to install Node.js](https://www.newline.co/@Adele/how-to-install-nodejs-and-npm-on-macos--22782681), I recommend using the Homebrew option.

## Config

Update the `.env` file with your Notion token and the database you would like to connect to the workflow. Alternatively, you can do the same thing using the Alfred Preferences UI: open Alfred preferences, find the Workflows tab, import the .alfredworkflow file, select it, and then click the [x] button in the upper right panel.

```
NOTION_TOKEN=
DATABASE_ID=
```

DATABASE_ID can be found by navigating to a specific database of interest within Notion, clicking Share, and clicking copy link.
The link will be in the format:
```
https://www.notion.so/workspace/<long_hash_1>?v=<long_hash_2>
```
<long_hash_1> is the DATABASE_ID that you want (and if you are curious, <long_hash_2> is the view ID, but we do not care about that.)

NOTION_TOKEN needs to be generated by making a Notion Integration:

## Setup a Notion Integration
Go to:
```
https://www.notion.so/my-integrations
```
and create a new Internal integration. It may prompt you to login. There are two types of integrations: Internal is for use by you and your team, and Public is for use by a broad audience across multiple workspaces. You probably want an internal one, but more details [here](https://developers.notion.com/docs/authorization#:~:text=There%20are%20two%20types%20of,audience%2C%20across%20many%20Notion%20workspaces).

Give your Integration a name, such as Alfred Task Maker, select the workspace where your database of interest is located, and give it read, update, and insert Content Capabilities. Hit submit, and you have now created an integration!

You will be brought to your integration page-- at the top you will see the Internal Integration Token.
Click the Show button to reveal-- this token is the NOTION_TOKEN that you want to copy and paste into the .env file or add via Alfred Preferences (details above).

## Give Your Integration Database Access
After you have created the integration for a specific workspace, you need to give it edit access to the database of interest within that workspace.
Return to Notion, find the database of interest, and click Share. Click on the bar with text People, emails, groups, or integrations. Find your integration from the dropdown menu, and click Share. Ensure that your integration has Edit Access.

Lastly, within Notion, rename the primary key of your database to Tasks (the default is Name)-- the script needs this in order to work.


## Usage

> Please update the keywords for something that works for you.

In Alfred, type `:` or use the keystroke to open the workflow, add your text and press <kbd>Enter</kbd> to save it to your Notion database.

After saving, you can append content (text) to the newly created page, open the page in the browser or copy the link to the clipboard.

## Related

- [alfy](https://github.com/sindresorhus/alfy) - Create Alfred workflows with ease
